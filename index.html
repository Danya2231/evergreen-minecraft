<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EverGreen Minecraft - –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root{--lime:#7CFC00;--dark-lime:#32CD32;--light-green:#f0f8f0;--white:#FFF;--black:#1A1A1A;--gray:#f5f5f5;}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Press Start 2P',cursive;background-color:var(--light-green);color:var(--black);min-height:100vh;opacity:0;transition:opacity 1s ease-in;}
.container{max-width:800px;margin:0 auto;padding:20px;position:relative;z-index:1;}
.logo-container{text-align:center;margin:20px 0 30px;}
.logo{width:150px;height:150px;border-radius:50%;border:5px solid var(--lime);box-shadow:0 0 20px var(--lime);padding:10px;background-color:var(--white);transition:transform 0.3s,box-shadow 0.3s;}
.logo:hover{transform:scale(1.05);box-shadow:0 0 30px var(--lime);}
.welcome{background-color:var(--white);color:var(--black);padding:30px;border-radius:15px;text-align:center;margin-bottom:30px;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);}
.welcome h1{font-size:1.8rem;margin-bottom:20px;color:var(--black);}
.welcome p{font-size:0.8rem;line-height:1.6;margin-bottom:25px;}
.btn{display:inline-block;background-color:var(--lime);color:var(--black);padding:12px 25px;border:none;border-radius:8px;font-family:'Press Start 2P',cursive;font-size:0.8rem;cursor:pointer;transition:all 0.3s;text-decoration:none;box-shadow:0 4px 0 var(--dark-lime);}
.btn:hover{transform:translateY(-3px);box-shadow:0 6px 0 var(--dark-lime);background-color:#90EE90;}
.btn:active{transform:translateY(1px);box-shadow:0 2px 0 var(--dark-lime);}
.btn:disabled{background-color:#ccc;box-shadow:0 4px 0 #999;cursor:not-allowed;transform:none;}
.form-container{display:none;background-color:var(--white);color:var(--black);padding:30px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);margin-bottom:30px;}
.form-step{display:none;animation:fadeIn 0.5s ease-in-out;}
.form-step.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
.form-step h2{font-size:1.2rem;margin-bottom:20px;color:var(--black);text-align:center;}
.form-group{margin-bottom:20px;}
.form-group label{display:block;margin-bottom:10px;font-size:0.7rem;}
.form-group input{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-family:'Press Start 2P',cursive;font-size:0.7rem;background-color:var(--gray);}
.form-group input:focus{outline:none;border-color:var(--lime);box-shadow:0 0 5px var(--lime);}
.form-navigation{display:flex;justify-content:space-between;margin-top:30px;}
.progress-container{margin:30px 0;}
.progress-bar{height:10px;background-color:#ddd;border-radius:5px;overflow:hidden;}
.progress{height:100%;background-color:var(--lime);width:0%;transition:width 0.5s ease-in-out;}
.progress-steps{display:flex;justify-content:space-between;margin-top:10px;}
.progress-step{font-size:0.6rem;color:#999;}
.progress-step.active{color:var(--lime);}
.success-message{display:none;background-color:var(--white);color:var(--black);padding:40px 30px;border-radius:15px;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);margin-bottom:30px;}
.success-message h2{font-size:1.5rem;margin-bottom:20px;color:var(--black);}
.success-message p{font-size:0.8rem;line-height:1.6;margin-bottom:25px;}
.application-data{background-color:var(--gray);padding:15px;border-radius:8px;margin:20px 0;text-align:left;font-size:0.7rem;word-wrap: break-word;}
.application-data h3{text-align:center;margin-bottom:10px;}
.admin-container{display:none;background-color:var(--white);padding:20px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);overflow-x:auto;}
.admin-table{width:100%;border-collapse:collapse;margin:20px 0;table-layout:fixed;}
.admin-table th,.admin-table td{border:1px solid #ccc;padding:8px;text-align:center;font-size:0.7rem;word-wrap: break-word;}
.admin-table th{background-color:var(--lime);}
.export-section{margin-top:20px;padding:15px;background-color:var(--gray);border-radius:8px;text-align:center;}
.export-section h3{font-size:0.9rem;margin-bottom:15px;}
@media(max-width:768px){.container{padding:10px;}.welcome h1{font-size:1.4rem;}.welcome p{font-size:0.7rem;}.btn{font-size:0.7rem;padding:10px 20px;}.form-step h2{font-size:1rem;}.form-group label{font-size:0.6rem;}.form-group input{font-size:0.6rem;padding:10px;}.success-message h2{font-size:1.2rem;}.success-message p{font-size:0.7rem;}}
@media(max-width:480px){.logo{width:120px;height:120px;}.welcome,.form-container,.success-message{padding:20px;}.welcome h1{font-size:1.1rem;}.form-step h2{font-size:0.9rem;}.progress-step{font-size:0.5rem;}.form-navigation{flex-direction:column;gap:10px;}.form-navigation .btn{width:100%;}}
</style>
</head>
<body>
<div class="container" id="mainContent">
  <div class="logo-container">
    <img src="https://i.ibb.co/TqYqtF1h/logo.png" class="logo" alt="EverGreen">
  </div>

  <div class="welcome" id="welcomeBlock">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ EverGreen!</h1>
    <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É Minecraft —Å–µ—Ä–≤–µ—Ä—É. –ß—Ç–æ–±—ã —Å—Ç–∞—Ç—å —á–∞—Å—Ç—å—é —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞—è–≤–∫—É –Ω–∏–∂–µ.</p>
    <button class="btn" id="startBtn">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
  </div>

  <div class="form-container" id="formContainer">
    <div class="progress-container">
      <div class="progress-bar"><div class="progress" id="progressBar"></div></div>
      <div class="progress-steps">
        <div class="progress-step active">–ù–∏–∫</div>
        <div class="progress-step">–í–æ–∑—Ä–∞—Å—Ç</div>
        <div class="progress-step">YouTube</div>
        <div class="progress-step">Discord</div>
      </div>
    </div>
    <form id="applicationForm">
      <div class="form-step active" id="step1">
        <h2>–ö–∞–∫–æ–π —É –≤–∞—Å –Ω–∏–∫ –≤ Minecraft?</h2>
        <div class="form-group">
          <label>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫:</label>
          <input type="text" id="minecraftNick" required>
        </div>
        <div class="form-navigation"><div></div><button type="button" class="btn" id="nextBtn1">–î–∞–ª–µ–µ</button></div>
      </div>
      <div class="form-step" id="step2">
        <h2>–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?</h2>
        <div class="form-group">
          <label>–í–æ–∑—Ä–∞—Å—Ç:</label>
          <input type="number" id="age" min="10" max="100" required>
        </div>
        <div class="form-navigation">
          <button type="button" class="btn" id="prevBtn2">–ù–∞–∑–∞–¥</button>
          <button type="button" class="btn" id="nextBtn2">–î–∞–ª–µ–µ</button>
        </div>
      </div>
      <div class="form-step" id="step3">
        <h2>–°—Å—ã–ª–∫–∞ –Ω–∞ YouTube-–≤–∏–¥–µ–æ</h2>
        <div class="form-group">
          <label>–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É:</label>
          <input type="url" id="youtubeLink" required>
        </div>
        <div class="form-navigation">
          <button type="button" class="btn" id="prevBtn3">–ù–∞–∑–∞–¥</button>
          <button type="button" class="btn" id="nextBtn3">–î–∞–ª–µ–µ</button>
        </div>
      </div>
      <div class="form-step" id="step4">
        <h2>–í–∞—à –Ω–∏–∫ –≤ Discord</h2>
        <div class="form-group">
          <label>Discord –Ω–∏–∫:</label>
          <input type="text" id="discordNick" placeholder="User" required>
        </div>
        <div class="form-navigation">
          <button type="button" class="btn" id="prevBtn4">–ù–∞–∑–∞–¥</button>
          <button type="submit" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
      </div>
    </form>
  </div>

  <div class="success-message" id="successMessage">
    <h2>–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</h2>
    <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à—É –∑–∞—è–≤–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä EverGreen. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ Discord.</p>
    <div class="application-data" id="applicationData"></div>
    <p>ID –∑–∞—è–≤–∫–∏: <strong id="applicationId"></strong></p>
    <button class="btn" id="newApplicationBtn">–ü–æ–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É</button>
  </div>

  <div class="admin-container" id="adminPanel">
    <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å EverGreen</h2>
    <table class="admin-table" id="adminTable">
      <thead><tr><th>ID</th><th>–ù–∏–∫</th><th>–í–æ–∑—Ä–∞—Å—Ç</th><th>YouTube</th><th>Discord</th><th>–î–∞—Ç–∞</th></tr></thead>
      <tbody></tbody>
    </table>
    
    <div class="export-section">
      <h3>–≠–∫—Å–ø–æ—Ä—Ç –∑–∞—è–≤–æ–∫ –¥–ª—è Discord –±–æ—Ç–∞</h3>
      <p style="font-size: 0.6rem; margin-bottom: 15px;">–°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª applications.json –∏ –ø–æ–ª–æ–∂–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å –±–æ—Ç–æ–º</p>
      <button class="btn" id="exportBtn">üì• –≠–∫—Å–ø–æ—Ä—Ç –∑–∞—è–≤–æ–∫ (JSON)</button>
      <button class="btn" id="clearStorageBtn" style="background-color: #ff4444; margin-left: 10px;">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏</button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.body.style.opacity = '1';
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∑–∞—è–≤–æ–∫ –≤ JSON —Ñ–∞–π–ª
function exportApplications() {
  const apps = JSON.parse(localStorage.getItem('evergreenApplications') || '[]');
  const dataStr = JSON.stringify(apps, null, 2);
  const blob = new Blob([dataStr], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = 'applications.json';
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
  
  alert(`‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ ${apps.length} –∑–∞—è–≤–æ–∫ –≤ —Ñ–∞–π–ª applications.json`);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫
function clearAllApplications() {
  if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –í–°–ï –∑–∞—è–≤–∫–∏? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')) {
    localStorage.removeItem('evergreenApplications');
    updateAdminTable();
    alert('–í—Å–µ –∑–∞—è–≤–∫–∏ —É–¥–∞–ª–µ–Ω—ã!');
  }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
function updateAdminTable() {
  const apps = JSON.parse(localStorage.getItem('evergreenApplications') || '[]');
  const tbody = document.querySelector('#adminTable tbody');
  
  if (apps.length === 0) {
    tbody.innerHTML = '<tr><td colspan="6">–ù–µ—Ç –∑–∞—è–≤–æ–∫</td></tr>';
  } else {
    tbody.innerHTML = apps.map(app => `
      <tr>
        <td>${app.id}</td>
        <td>${app.minecraftNick}</td>
        <td>${app.age}</td>
        <td><a href="${app.youtubeLink}" target="_blank">–°—Å—ã–ª–∫–∞</a></td>
        <td>${app.discordNick}</td>
        <td>${app.timestamp}</td>
      </tr>
    `).join('');
  }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
const urlParams = new URLSearchParams(window.location.search);
const isAdmin = urlParams.get('admin') === '1';

if (isAdmin) {
  document.getElementById('welcomeBlock').style.display = 'none';
  document.getElementById('formContainer').style.display = 'none';
  document.getElementById('successMessage').style.display = 'none';
  
  const pwd = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:");
  if (pwd !== 'EverGreenAdmin123') {
    alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
    const url = new URL(window.location.href);
    url.searchParams.delete('admin');
    history.replaceState(null, '', url.toString());
    document.getElementById('welcomeBlock').style.display = 'block';
  } else {
    const adminDiv = document.getElementById('adminPanel');
    adminDiv.style.display = 'block';
    updateAdminTable();
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ –æ—á–∏—Å—Ç–∫–∏
    document.getElementById('exportBtn').addEventListener('click', exportApplications);
    document.getElementById('clearStorageBtn').addEventListener('click', clearAllApplications);
  }
} else {
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  const welcomeBlock = document.getElementById('welcomeBlock');
  const formContainer = document.getElementById('formContainer');
  const successMessage = document.getElementById('successMessage');
  const startBtn = document.getElementById('startBtn');
  const newApplicationBtn = document.getElementById('newApplicationBtn');
  const steps = document.querySelectorAll('.form-step');
  const progressBar = document.getElementById('progressBar');
  const stepLabels = document.querySelectorAll('.progress-step');
  const totalSteps = 4;
  let currentStep = 1;

  function updateProgressBar() {
    progressBar.style.width = ((currentStep - 1) / (totalSteps - 1) * 100) + '%';
    stepLabels.forEach((l, i) => l.classList.toggle('active', i < currentStep));
  }

  function goNext() {
    let valid = false;
    switch (currentStep) {
      case 1:
        valid = document.getElementById('minecraftNick').value.trim() !== '';
        if (!valid) { alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫'); return; }
        break;
      case 2:
        const ageVal = parseInt(document.getElementById('age').value);
        valid = !isNaN(ageVal) && ageVal >= 10 && ageVal <= 100;
        if (!valid) { alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç (10-100)'); return; }
        break;
      case 3:
        const yt = document.getElementById('youtubeLink').value.trim();
        valid = (yt !== '' && (yt.includes('youtube.com') || yt.includes('youtu.be')));
        if (!valid) { alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ YouTube'); return; }
        break;
    }
    if (currentStep < totalSteps) {
      steps[currentStep - 1].classList.remove('active');
      currentStep++;
      steps[currentStep - 1].classList.add('active');
      updateProgressBar();
    }
  }

  function goPrev() {
    if (currentStep > 1) {
      steps[currentStep - 1].classList.remove('active');
      currentStep--;
      steps[currentStep - 1].classList.add('active');
      updateProgressBar();
    }
  }

  document.getElementById('applicationForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const discord = document.getElementById('discordNick').value.trim();
    if (discord === '') { alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫ Discord'); return; }
    
    const data = {
      id: Math.random().toString(36).substring(2, 8).toUpperCase(),
      minecraftNick: document.getElementById('minecraftNick').value.trim(),
      age: document.getElementById('age').value,
      youtubeLink: document.getElementById('youtubeLink').value.trim(),
      discordNick: discord,
      timestamp: new Date().toLocaleString()
    };
    
    let apps = JSON.parse(localStorage.getItem('evergreenApplications') || '[]');
    apps.push(data);
    localStorage.setItem('evergreenApplications', JSON.stringify(apps));
    
    document.getElementById('applicationData').innerHTML = `
      <h3>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ:</h3>
      <p><strong>–ù–∏–∫:</strong> ${data.minecraftNick}</p>
      <p><strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> ${data.age}</p>
      <p><strong>YouTube:</strong> ${data.youtubeLink}</p>
      <p><strong>Discord:</strong> ${data.discordNick}</p>
    `;
    document.getElementById('applicationId').textContent = data.id;
    formContainer.style.display = 'none';
    successMessage.style.display = 'block';
  });

  startBtn.addEventListener('click', function() {
    welcomeBlock.style.display = 'none';
    formContainer.style.display = 'block';
  });

  newApplicationBtn.addEventListener('click', function() {
    document.getElementById('applicationForm').reset();
    steps.forEach(s => s.classList.remove('active'));
    document.getElementById('step1').classList.add('active');
    currentStep = 1;
    updateProgressBar();
    successMessage.style.display = 'none';
    formContainer.style.display = 'block';
  });

  // –ù–∞–≤–∏–≥–∞—Ü–∏—è —à–∞–≥–æ–≤
  document.getElementById('nextBtn1').addEventListener('click', goNext);
  document.getElementById('nextBtn2').addEventListener('click', goNext);
  document.getElementById('nextBtn3').addEventListener('click', goNext);
  document.getElementById('prevBtn2').addEventListener('click', goPrev);
  document.getElementById('prevBtn3').addEventListener('click', goPrev);
  document.getElementById('prevBtn4').addEventListener('click', goPrev);
}
</script>
</body>
</html>
