<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EverGreen Minecraft</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root {
    --lime: #7CFC00;
    --dark-lime: #32CD32;
    --light-green: #f0f8f0;
    --white: #FFFFFF;
    --black: #1A1A1A;
    --gray: #f5f5f5;
}
* {margin:0;padding:0;box-sizing:border-box;}
body {font-family:'Press Start 2P', cursive;background-color:var(--light-green);color:var(--black);min-height:100vh;opacity:0;transition:opacity 1.5s ease-in;}
.container {max-width:800px;margin:0 auto;padding:20px;position:relative;z-index:1;}
.logo-container {text-align:center;margin:20px 0 30px;}
.logo {width:150px;height:150px;border-radius:50%;border:5px solid var(--lime);box-shadow:0 0 20px var(--lime);padding:10px;background-color:var(--white);transition: transform 0.3s, box-shadow 0.3s;}
.logo:hover {transform:scale(1.05);box-shadow:0 0 30px var(--lime);}
.welcome {background-color:var(--white);color:var(--black);padding:30px;border-radius:15px;text-align:center;margin-bottom:30px;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);}
.welcome h1 {font-size:1.8rem;margin-bottom:20px;}
.welcome p {font-size:0.8rem;line-height:1.6;margin-bottom:25px;}
.btn {display:inline-block;background-color:var(--lime);color:var(--black);padding:12px 25px;border:none;border-radius:8px;font-family:'Press Start 2P', cursive;font-size:0.8rem;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 0 var(--dark-lime);}
.btn:hover {transform:translateY(-3px);box-shadow:0 6px 0 var(--dark-lime);background-color:#90EE90;}
.btn:active {transform:translateY(1px);box-shadow:0 2px 0 var(--dark-lime);}
.form-container {display:none;background-color:var(--white);color:var(--black);padding:30px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);margin-bottom:30px;}
.form-step {display:none;animation:fadeIn 0.5s ease-in-out;}
.form-step.active {display:block;}
@keyframes fadeIn {from {opacity:0;transform:translateY(20px);} to {opacity:1;transform:translateY(0);}}
.form-step h2 {font-size:1.2rem;margin-bottom:20px;text-align:center;color:var(--black);}
.form-group {margin-bottom:20px;}
.form-group label {display:block;margin-bottom:10px;font-size:0.7rem;}
.form-group input {width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-family:'Press Start 2P', cursive;font-size:0.7rem;background-color:var(--gray);}
.form-group input:focus {outline:none;border-color:var(--lime);box-shadow:0 0 5px var(--lime);}
.form-navigation {display:flex;justify-content:space-between;margin-top:30px;}
.progress-container {margin:30px 0;}
.progress-bar {height:10px;background-color:#ddd;border-radius:5px;overflow:hidden;}
.progress {height:100%;background-color:var(--lime);width:0%;transition:width 0.5s ease-in-out;}
.progress-steps {display:flex;justify-content:space-between;margin-top:10px;}
.progress-step {font-size:0.6rem;color:#999;}
.progress-step.active {color:var(--lime);}
.success-message {display:none;background-color:var(--white);color:var(--black);padding:40px 30px;border-radius:15px;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);margin-bottom:30px;}
.success-message h2 {font-size:1.5rem;margin-bottom:20px;}
.success-message p {font-size:0.8rem;line-height:1.6;margin-bottom:25px;}
.application-data {background-color:var(--gray);padding:15px;border-radius:8px;margin:20px 0;text-align:left;font-size:0.7rem;}
.application-data h3 {text-align:center;margin-bottom:10px;}
/* Админ-панель */
.admin-container {display:none;background-color:var(--white);color:var(--black);padding:20px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1);border:3px solid var(--lime);margin:20px;}
.admin-container h2 {text-align:center;margin-bottom:20px;}
.admin-table {width:100%;border-collapse:collapse;}
.admin-table th, .admin-table td {border:1px solid #ddd;padding:8px;text-align:left;font-size:0.7rem;}
.admin-table th {background-color:var(--lime);}
.admin-table tr:nth-child(even) {background-color:var(--gray);}
.admin-table tr:hover {background-color:#c6f5c6;}
</style>
</head>
<body>
<div class="container" id="mainContent">
    <!-- Логотип и приветствие -->
    <div class="logo-container">
        <img src="https://i.ibb.co/TqYqtF1h/logo.png" class="logo">
    </div>
    <div class="welcome" id="welcomeBlock">
        <h1>Добро пожаловать на EverGreen!</h1>
        <p>Присоединяйтесь к нашему приватному Minecraft серверу. Заполните заявку ниже.</p>
        <button class="btn" id="startBtn">Подать заявку</button>
    </div>

    <!-- Форма -->
    <div class="form-container" id="formContainer">
        <div class="progress-container">
            <div class="progress-bar"><div class="progress" id="progressBar"></div></div>
            <div class="progress-steps">
                <div class="progress-step active" id="step1Label">Ник</div>
                <div class="progress-step" id="step2Label">Возраст</div>
                <div class="progress-step" id="step3Label">YouTube</div>
                <div class="progress-step" id="step4Label">Discord</div>
            </div>
        </div>
        <form id="applicationForm">
            <div class="form-step active" id="step1">
                <h2>Какой у вас ник в Minecraft?</h2>
                <div class="form-group"><label for="minecraftNick">Введите ник:</label><input type="text" id="minecraftNick" required></div>
                <div class="form-navigation"><div></div><button type="button" class="btn" id="nextBtn1">Далее</button></div>
            </div>
            <div class="form-step" id="step2">
                <h2>Сколько вам лет?</h2>
                <div class="form-group"><label for="age">Возраст:</label><input type="number" id="age" min="10" max="100" required></div>
                <div class="form-navigation"><button type="button" class="btn" id="prevBtn2">Назад</button><button type="button" class="btn" id="nextBtn2">Далее</button></div>
            </div>
            <div class="form-step" id="step3">
                <h2>Ссылка на YouTube-видео с заявкой</h2>
                <div class="form-group"><label for="youtubeLink">Ссылка:</label><input type="url" id="youtubeLink" required></div>
                <div class="form-navigation"><button type="button" class="btn" id="prevBtn3">Назад</button><button type="button" class="btn" id="nextBtn3">Далее</button></div>
            </div>
            <div class="form-step" id="step4">
                <h2>Ваш ник в Discord</h2>
                <div class="form-group"><label for="discordNick">Discord ник:</label><input type="text" id="discordNick" required></div>
                <div class="form-navigation"><button type="button" class="btn" id="prevBtn4">Назад</button><button type="submit" class="btn">Отправить</button></div>
            </div>
        </form>
    </div>

    <!-- Успех -->
    <div class="success-message" id="successMessage">
        <h2>Заявка отправлена!</h2>
        <div class="application-data" id="applicationData"></div>
        <p>ID заявки: <strong id="applicationId"></strong></p>
        <button class="btn" id="newApplicationBtn">Подать новую заявку</button>
    </div>

    <!-- Админ-панель -->
    <div class="admin-container" id="adminPanel">
        <h2>Админ-панель EverGreen</h2>
        <table class="admin-table" id="adminTable">
            <thead>
                <tr><th>ID</th><th>Ник</th><th>Возраст</th><th>YouTube</th><th>Discord</th><th>Дата</th></tr>
            </thead>
            <tbody></tbody>
        </table>
        <button class="btn" id="clearAppsBtn">Очистить все заявки</button>
    </div>
</div>

<script>
// Fade-in
document.addEventListener('DOMContentLoaded',()=>{document.body.style.opacity='1';});

// Элементы
const welcomeBlock=document.getElementById('welcomeBlock');
const formContainer=document.getElementById('formContainer');
const successMessage=document.getElementById('successMessage');
const startBtn=document.getElementById('startBtn');
const newApplicationBtn=document.getElementById('newApplicationBtn');
const steps=document.querySelectorAll('.form-step');
const progressBar=document.getElementById('progressBar');
const stepLabels=document.querySelectorAll('.progress-step');
const totalSteps=4;
let currentStep=1;

// Навигация
function updateProgressBar(){progressBar.style.width=((currentStep-1)/(totalSteps-1)*100)+'%';stepLabels.forEach((l,i)=>l.classList.toggle('active',i<currentStep));}
function goNext(){let valid=false;switch(currentStep){case 1: valid=document.getElementById('minecraftNick').value.trim()!==''; if(!valid){alert('Введите ник'); return;} break; case 2: const ageVal=parseInt(document.getElementById('age').value); valid=!isNaN(ageVal)&&ageVal>=10&&ageVal<=100; if(!valid){alert('Введите корректный возраст'); return;} break; case 3: const yt=document.getElementById('youtubeLink').value.trim(); valid=(yt!==''&&(yt.includes('youtube.com')||yt.includes('youtu.be'))); if(!valid){alert('Введите корректную ссылку'); return;} break;} if(currentStep<totalSteps){steps[currentStep-1].classList.remove('active'); currentStep++; steps[currentStep-1].classList.add('active'); updateProgressBar();}}
function goPrev(){if(currentStep>1){steps[currentStep-1].classList.remove('active');currentStep--;steps[currentStep-1].classList.add('active');updateProgressBar();}}

// Отправка формы
document.getElementById('applicationForm').addEventListener('submit',function(e){
    e.preventDefault();
    const discord=document.getElementById('discordNick').value.trim();
    if(discord===''||!discord.includes('#')){alert('Введите корректный Discord'); return;}
    const data={
        id:'EG-'+Date.now()+'-'+Math.floor(Math.random()*1000),
        minecraftNick:document.getElementById('minecraftNick').value.trim(),
        age:document.getElementById('age').value,
        youtubeLink:document.getElementById('youtubeLink').value.trim(),
        discordNick:discord,
        timestamp:new Date().toLocaleString()
    };
    let apps=JSON.parse(localStorage.getItem('evergreenApplications')||'[]'); apps.push(data); localStorage.setItem('evergreenApplications',JSON.stringify(apps));
    document.getElementById('applicationData').innerHTML=`<h3>Ваши данные:</h3><p><strong>Ник:</strong>${data.minecraftNick}</p><p><strong>Возраст:</strong>${data.age}</p><p><strong>YouTube:</strong>${data.youtubeLink}</p><p><strong>Discord:</strong>${data.discordNick}</p>`;
    document.getElementById('applicationId').textContent=data.id;
    formContainer.style.display='none'; successMessage.style.display='block';
});

// Кнопки
startBtn.addEventListener('click',()=>{welcomeBlock.style.display='none'; formContainer.style.display='block';});
newApplicationBtn.addEventListener('click',()=>{document.getElementById('applicationForm').reset(); steps.forEach(s=>s.classList.remove('active')); document.getElementById('step1').classList.add('active'); currentStep=1; updateProgressBar(); successMessage.style.display='none'; formContainer.style.display='block';});

// Навигация шагов
document.getElementById('nextBtn1').addEventListener('click',goNext);
document.getElementById('nextBtn2').addEventListener('click',goNext);
document.getElementById('nextBtn3').addEventListener('click',goNext);
document.getElementById('prevBtn2').addEventListener('click',goPrev);
document.getElementById('prevBtn3').addEventListener('click',goPrev);
document.getElementById('prevBtn4').addEventListener('click',goPrev);

// --- Админ-панель ---
if(window.location.pathname.includes('admpanel20183183')){
    document.getElementById('mainContent').innerHTML='';
    const pwd=prompt("Введите пароль администратора:");
    if(pwd!=='EverGreenAdmin123'){alert('Неверный пароль!'); window.location.href='/';}
    else{
        const adminDiv=document.getElementById('adminPanel');
        adminDiv.style.display='block';
        const tbody=adminDiv.querySelector('tbody');
        const apps=JSON.parse(localStorage.getItem('evergreenApplications')||'[]');
        apps.forEach(a=>{
            const tr=document.createElement('tr');
            tr.innerHTML=`<td>${a.id}</td><td>${a.minecraftNick}</td><td>${a.age}</td><td>${a.youtubeLink}</td><td>${a.discordNick}</td><td>${a.timestamp}</td>`;
            tbody.appendChild(tr);
        });
        document.getElementById('clearAppsBtn').addEventListener('click',()=>{
            if(confirm('Вы уверены, что хотите удалить все заявки?')){localStorage.removeItem('evergreenApplications'); tbody.innerHTML='';}
        });
    }
}
</script>
</body>
</html>
